# ====================================================================
# ABSI TECHNOLOGY MOODLE - ENVIRONMENT CONFIGURATION
# ====================================================================
# Copy this file to .env and modify the values according to your needs
# IMPORTANT: Change all default passwords before deploying to production!

# ====================================================================
# DATABASE CONFIGURATION (MariaDB)
# ====================================================================
MARIADB_ROOT_PASSWORD=CHANGE_THIS_TO_STRONG_ROOT_PASSWORD
MARIADB_DATABASE=absi_moodle_db
MARIADB_USER=absi_moodle_user
MARIADB_PASSWORD=CHANGE_THIS_TO_STRONG_DB_PASSWORD

# ====================================================================
# MOODLE ADMIN CONFIGURATION
# ====================================================================
MOODLE_USERNAME=absi_admin
MOODLE_PASSWORD=CHANGE_THIS_TO_STRONG_ADMIN_PASSWORD
MOODLE_EMAIL=admin@yourdomain.com

# ====================================================================
# MOODLE SITE CONFIGURATION
# ====================================================================
MOODLE_SITE_NAME=ABS Technology Moodle LMS
MOODLE_SITE_FULLNAME=ABS Technology Learning Management System
MOODLE_SITE_SHORTNAME=ABS-LMS
MOODLE_CRON_MINUTES=1

# ====================================================================
# PROXY CONFIGURATION  
# ====================================================================
# Enable when using reverse proxy (Nginx/Traefik/CloudFlare/GCP LB)
MOODLE_REVERSEPROXY=yes
# Enable when SSL termination is handled by proxy
MOODLE_SSLPROXY=yes

# ====================================================================
# CONTAINER CONFIGURATION
# ====================================================================
CONTAINER_NAME=absi-moodle
CONTAINER_TIMEZONE=UTC
CONTAINER_LOG_LEVEL=info

# ====================================================================
# SUPPORT CONFIGURATION
# ====================================================================
SUPPORT_EMAIL=billnguyen@absi.edu.vn
SUPPORT_WEBSITE=https://abs.education
SUPPORT_DOCUMENTATION=https://docs.abs.education

# ====================================================================
# DATABASE CONNECTION CONFIGURATION
# ====================================================================
MOODLE_DATABASE_TYPE=mariadb
MOODLE_DATABASE_HOST=mariadb
MOODLE_DATABASE_PORT_NUMBER=3306

# ====================================================================
# PHP CONFIGURATION LIMITS
# ====================================================================
PHP_MEMORY_LIMIT=512M
PHP_MAX_INPUT_VARS=5000
PHP_MAX_FILE_UPLOADS=200
PHP_POST_MAX_SIZE=2G
PHP_UPLOAD_MAX_FILESIZE=2G
PHP_MAX_EXECUTION_TIME=600
PHP_MAX_INPUT_TIME=60
PHP_OUTPUT_BUFFERING=4096
PHP_DEFAULT_SOCKET_TIMEOUT=60

# PHP Error Reporting
PHP_ERROR_REPORTING=E_ALL & ~E_NOTICE & ~E_STRICT & ~E_DEPRECATED
PHP_DISPLAY_ERRORS=Off
PHP_LOG_ERRORS=On

# PHP-FPM Pool Settings
PHP_FPM_PM=dynamic
PHP_FPM_MAX_CHILDREN=5
PHP_FPM_START_SERVERS=2
PHP_FPM_MIN_SPARE_SERVERS=1
PHP_FPM_MAX_SPARE_SERVERS=3
PHP_FPM_MAX_REQUESTS=500

# ====================================================================
# APACHE CONFIGURATION
# ====================================================================
# Apache Performance Settings
APACHE_TIMEOUT=60
APACHE_KEEPALIVE=On
APACHE_MAX_KEEPALIVE_REQUESTS=1000
APACHE_KEEPALIVE_TIMEOUT=15
APACHE_LOG_LEVEL=warn

# Apache MPM Settings
APACHE_START_SERVERS=8
APACHE_MIN_SPARE_SERVERS=8
APACHE_MAX_SPARE_SERVERS=20
APACHE_MAX_REQUEST_WORKERS=256
APACHE_MAX_CONNECTIONS_PER_CHILD=1000
APACHE_SERVER_LIMIT=256

# Apache Ports
APACHE_HTTP_PORT=8080
APACHE_HTTPS_PORT=8443

# SSL Configuration
SSL_CERT_FILE=/etc/ssl/certs/localhost.crt
SSL_KEY_FILE=/etc/ssl/private/localhost.key

# System Configuration
SYSTEM_TIMEZONE=Asia/Ho_Chi_Minh

# ====================================================================
# SECURITY NOTES
# ====================================================================
# 
# GENERATE STRONG PASSWORDS:
# openssl rand -base64 32     # For root password
# openssl rand -base64 24     # For database password  
# openssl rand -base64 16     # For admin password
#
# EXAMPLE USAGE:
# cp env.example .env
# Edit .env with your passwords
# docker-compose up -d
# ==================================================================== 
